<h1>Listing Breweries</h1>

<div style="border-style: solid;">
  brewerylist-name: <%= ActionController::Base.new.fragment_exist?( 'brewerylist-name' ) %>
  <br>
  brewerylist-year: <%= ActionController::Base.new.fragment_exist?( 'brewerylist-year' ) %>
  <br>
  current: <%= "brewerylist-#{@order}" %>
</div>

<% cache "brewerylist-#{@order}", skip_digest: true do %>

<p>Total breweries: <%= @active_breweries.count + @retired_breweries.count %></p>

<h2>Active</h2>

<p>Number of active breweries: <%= @active_breweries.count %></p>

<%= render 'list', breweries: @active_breweries if not @active_breweries.empty? %>

<h2>Retired</h2>

<p>Number of retired breweries: <%= @retired_breweries.count %></p>

<%= render 'list', breweries: @retired_breweries if not @retired_breweries.empty? %>

<% end %>

<br>

<%= link_to 'New Brewery', new_brewery_path, class:'btn btn-success' if current_user %>
